Задание 3: архитектура
Что нужно сделать:
Построить верхнеуровневую архитектурую схему - как должна работать отправка PUSH уведомлений в данном приложении. Можно просто в виде блок схем. Считаем, что на бэкенде микросервисная архитектура. В данном задании рекомендуется в интернете изучить архитектуры подобных решений.
Быть готовым на собеседовании обсудить эту схему.
1. Общая идея решения
Так как на бэкенде используется микросервисная архитектура, пуш-уведомления должны быть реализованы через отдельный сервис уведомлений, а не “встроены” внутрь сервисов корзины или заказов.
Основная логика:
1.	Бизнес-сервисы (например, сервис корзины или заказов) генерируют события.
2.	Эти события передаются в шину сообщений.
3.	Отдельный сервис уведомлений обрабатывает события и принимает решение — нужно ли отправлять push.
4.	Push отправляется пользователю через внешние сервисы.

2. Верхнеуровневая схема (в текстовом виде)
Пользователь → Мобильное приложение
↓
Backend (микросервисы):
	Cart Service (событие: корзина без действий)
	Order Service (событие: заказ отменён)
	Marketing Service (событие: рекламная рассылка)
↓
Message Broker (например Kafka или RabbitMQ)
↓
Notification Service (сервис уведомлений)
↓
Push-провайдеры (APNs / FCM)
↓
Мобильное приложение пользователя
________________________________________
3. Как работает процесс
Регистрация устройства
Когда пользователь устанавливает приложение:
- устройство получает push-токен
- приложение передаёт его на backend
- токен сохраняется в базе (с привязкой к user_id)
Возникновение события
Например:
- пользователь оставил корзину без действий
- заказ отменён
- стартовала рекламная кампания
Соответствующий сервис публикует событие.
Обработка события
Сервис уведомлений:
- получает событие
- проверяет правила (можно ли отправлять, есть ли согласие)
- формирует текст уведомления
отправляет его через внешний push-провайдер

